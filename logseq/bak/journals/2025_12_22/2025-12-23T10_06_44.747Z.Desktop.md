- [[Daily Log]]
	- # ä»»åŠ¡
		- test
			- TODO æŒ‰ç…§å…¬å¸çš„é‚£å¥—æ¥æ”¹logseq #Q1-é‡è¦ç´§æ€¥
			  :logbook:
			  	  CLOCK: [2025-12-22 Mon 13:37:25]--[2025-12-22 Mon 15:53:57] =>  02:16:32
			  :END:
				- DONE template
				  :logbook:
				  		  CLOCK: [2025-12-22 Mon 13:37:16]--[2025-12-22 Mon 14:54:38] =>  01:17:22
				  :END:
				- DONE é¡¹ç›®æ—¶é—´
				- DONE scheduled
				- DONE æ€»ç»“ä¸€ä¸ªcursor ruleï¼Œä»¥åå†å†™æ–¹ä¾¿
				  :logbook:
				  		  CLOCK: [2025-12-22 Mon 14:56:54]--[2025-12-22 Mon 14:57:07] =>  00:00:13
				  :END:
				- LATER æƒ³æƒ³ç»éªŒä»€ä¹ˆçš„ï¼Œè¦ä¸è¦æ”¾ä¸€ä¸ªéšæœºæŠ“å–çš„çœ‹æ¿æ¥å±•ç¤ºåœ¨dailyé‡Œ
				- TODO dashboard
					- TODO é•¿æœŸä»»åŠ¡è§„åˆ’
					- DONE è§†å›¾æ’å¸ƒ
					- DONE å››ä¸ªä»»åŠ¡åˆ—è¡¨
					- TODO æ”¹äº†æ—¥æœŸæ ¼å¼ï¼Œè®°å¾—æŠŠè¿™ä¸ªä¿®ä¸€ä¸‹
				- TODO æ—…æ¸¸ç»éªŒå•Šï¼Œçœ‹çš„å„ç§è§†é¢‘å•Šï¼Œå’ŒåŒäº‹äº¤æµçš„ç»éªŒå•Šä»€ä¹ˆçš„ï¼Œæ•´ç†ä¸€ä¸ªæ–°çš„æ ¼å¼ç‰ˆæœ¬
			- TODO æ”¹å®Œlogseqä¹‹ååšä»Šå¹´çš„è®¡åˆ’å®‰æ’ #Q2-é‡è¦ä¸ç´§æ€¥
				- TODO æ‰¾å®ä¹ 
				- TODO åˆ·å…«è‚¡å’Œç®—æ³•çš„æ—¶é—´
				- TODO æ¸¯ä¸­æ–‡æ‰¾å®¤å‹æ‰¾æˆ¿å­
				- TODO äº¤é›…æ€
				- TODO ç”³NTU
				- TODO æ¯•ä¸šè®ºæ–‡ä»€ä¹ˆæ—¶å€™æå®šæ¯”è¾ƒåˆé€‚
		- #+BEGIN_QUERY
		  {
		   :title [:h3 "âœ… Q0-Routine å®Œæ•´åŠŸèƒ½ç‰ˆ"]
		   :query [:find (pull ?b [* {:block/page [:block/original-name]}])
		           :where
		           [?tag :block/name "q0-routine"]
		           [?b :block/refs ?tag]
		           (not [?b :block/is-template? true])]
		   :view (fn [rows]
		           [:table
		            [:thead
		             [:tr
		              [:th "ä»»åŠ¡åç§°"]
		              [:th "å¼€å§‹"]
		              [:th "ç»“æŸ"]
		              [:th "æ¥æºé¡µé¢"]]]
		            [:tbody
		             (for [r rows
		                   :let [content (get r :block/content "")
		                         ;; --- 1. å®‰å…¨çš„æ ‡é¢˜æ¸…ç† (ä¿æŒä¸å˜) ---
		                         lines (clojure.string/split-lines content)
		                         first-line (first lines)
		                         clean-name (clojure.string/replace first-line "#[[Q0-Routine]]" "")
		                         
		                         ;; --- 2. å±æ€§è¯»å– (ä¿æŒä¸å˜) ---
		                         props (get r :block/properties {})
		                         start (get props :start-date)
		                         due (get props :deadline)
		                         
		                         ;; --- 3. é¡µé¢é“¾æ¥ä¸é€»è¾‘åˆ¤æ–­ (æ–°åŠ åŠŸèƒ½) ---
		                         page-name (get-in r [:block/page :block/original-name])
		                         ;; åˆ¤æ–­1ï¼šå†…å®¹é‡Œæœ‰æ²¡æœ‰åŒæ‹¬å· [[
		                         has-brackets (clojure.string/includes? content "[[")
		                         ;; åˆ¤æ–­2ï¼šé¡µé¢åæ˜¯ä¸æ˜¯ journey (è½¬å°å†™å¯¹æ¯”)
		                         ;; æ³¨æ„ï¼šå¦‚æœä½ çš„æ—¥è®°é¡µå« "journals" è€Œä¸æ˜¯ "journey"ï¼Œè¯·æ‰‹åŠ¨æ”¹ä¸€ä¸‹ä¸‹é¢å¼•å·é‡Œçš„è¯
		                         is-journey (= (clojure.string/lower-case (str page-name)) "journey")
		                         
		                         ;; æœ€ç»ˆå†³å®šï¼š(ä¸æ˜¯journey) æˆ–è€… (æœ‰åŒæ‹¬å·) æ‰æ˜¾ç¤º
		                         show-page (or (not is-journey) has-brackets)]]
		               [:tr
		                [:td [:b clean-name]]
		                [:td (if start start "-")]
		                [:td (if due due "-")]
		                ;; --- è¿™é‡Œå˜æˆäº†å¯ç‚¹å‡»çš„é“¾æ¥ ---
		                [:td (if (and show-page page-name)
		                       [:a {:class "page-ref" 
		                            :href (str "#/page/" page-name)} 
		                           page-name]
		                       "-")]])]])
		  }
		  #+END_QUERY
		- ## ğŸ’‹ ä»Šæ—¥äº‹ä»Šæ—¥æ¯•
			-
			- #+BEGIN_QUERY
			  {:title [:h3 "ğŸ”´ Q1: é‡è¦ & ç´§æ€¥"]
			   :query [:find (pull ?b [*])
			           :in $ ?this-block-id
			           :where
			           ;; 1. å®šä½å½“å‰æŸ¥è¯¢å—æ‰€åœ¨çš„é¡µé¢åç§°
			           [?this-block :block/uuid ?this-block-id]
			           [?this-block :block/page ?p]
			           [?p :block/name ?name]
			           
			           ;; 2. å¼ºåˆ¶è¦æ±‚ TODO æ‰€åœ¨çš„é¡µé¢åç§°å¿…é¡»ä¸ä¹‹å®Œå…¨ç›¸åŒ
			           [?b :block/page ?bp]
			           [?bp :block/name ?name]
			           
			           ;; 3. åŸºç¡€ç­›é€‰
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           [?t :block/name "q1-é‡è¦ç´§æ€¥"]
			           [?b :block/refs ?t]
			   ]
			   :inputs [:block-self]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title [:h3 "ğŸŸ¡ Q2: é‡è¦ & ä¸ç´§æ€¥"]
			   :query [:find (pull ?b [*])
			           :in $ ?this-block-id
			           :where
			           [?this-block :block/uuid ?this-block-id]
			           [?this-block :block/page ?p]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           [?t :block/name "q2-é‡è¦ä¸ç´§æ€¥"]
			           [?b :block/path-refs ?t]
			   ]
			   :inputs [:block-self]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title [:h3 "ğŸ”µ Q3: ç´§æ€¥ & ä¸é‡è¦"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?p :block/journal-day ?today]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           [?t :block/name "q3-ç´§æ€¥ä¸é‡è¦"]
			           [?b :block/refs ?t]
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title [:h3 "âšª Q4: ä¸é‡è¦ & ä¸ç´§æ€¥ / å…¶ä»–"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?p :block/journal-day ?today]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           
			           ;; --- æ ¸å¿ƒä¿®æ”¹éƒ¨åˆ†ï¼šæ’é™¤åµŒå¥—ä»»åŠ¡ ---
			           ;; å¦‚æœä¸€ä¸ªå—çš„çˆ¶çº§(?parent)ä¹Ÿæ‹¥æœ‰ä»»åŠ¡æ ‡è®°(?p-marker)ï¼Œåˆ™æ’é™¤è¯¥å—
			           (not 
			             [?b :block/parent ?parent]
			             [?parent :block/marker ?p-marker]
			             [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?p-marker)])
			           ;; --------------------------------
			           
			           ;; æ’é™¤æ‰æ‰‹åŠ¨æ‰“äº† Q1, Q2, Q3 æ ‡ç­¾çš„ä»»åŠ¡
			           (not [?b :block/refs [:block/name "q1-é‡è¦ç´§æ€¥"]])
			           (not [?b :block/refs [:block/name "q2-é‡è¦ä¸ç´§æ€¥"]])
			           (not [?b :block/refs [:block/name "q3-ç´§æ€¥ä¸é‡è¦"]])
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
		- ## ğŸ“ å®‰æ’åˆ°ä»Šæ—¥
			- #+BEGIN_QUERY
			  {:title [:h3 "ğŸ“… ä»Šæ—¥è®¡åˆ’å¾…åŠ"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "DOING" "NOW" "LATER"} ?marker)]
			           ;; æ’é™¤å·²å®Œæˆ
			           (not [?b :block/marker "DONE"])
			           ;; æ—¶é—´åˆ¤å®šé€»è¾‘ï¼šä½¿ç”¨ or-join è§„é¿æŠ¥é”™
			           (or-join [?b ?today]
			             [?b :block/scheduled ?today]
			             [?b :block/deadline ?today]
			             (and [?j :block/journal-day ?today]
			                  [?b :block/refs ?j]))]
			   :inputs [:today]
			   :breadcrumb-show? true
			   :result-transform (fn [res]
			      (sort-by (fn [b]
			          (let [content (clojure.string/lower-case (get b :block/content ""))]
			            (cond 
			              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
			              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
			              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
			              :else 4)))
			          res))
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title [:h3 "ğŸš€ ä»Šæ—¥å¼€å§‹çš„é¡¹ç›® (ç‚¹å‡»è·³è½¬é¡µé¢)"]
			   :query [:find (pull ?p [*])
			           :in $ ?today
			           :where
			           ;; 1. å¯»æ‰¾å¸¦æœ‰ type:: project å±æ€§çš„å—
			           [?b :block/properties ?props]
			           [(get ?props :type) ?type]
			           [(= ?type "project")]
			           
			           ;; 2. åŒ¹é…å…¶å¼•ç”¨çš„æ—¥æœŸæ˜¯ä»Šå¤©
			           [?jp :block/journal-day ?today]
			           [?b :block/refs ?jp]
			           
			           ;; 3. å…³è”åˆ°æ‰€å±é¡µé¢
			           [?b :block/page ?p]]
			   :inputs [:today]
			   :result-transform (fn [res]
			      (->> res
			           ;; å…ˆå»é‡ï¼Œé¿å…åŒä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ªå—ç¬¦åˆæ¡ä»¶å¯¼è‡´é‡å¤å±•ç¤º
			           distinct
			           (sort-by (fn [p]
			              (let [p-name (or (get p :block/original-name) (get p :block/name) "z")
			                    name (clojure.string/lower-case (str p-name))]
			                (cond 
			                  (clojure.string/includes? name "q1-é‡è¦ç´§æ€¥") 1
			                  (clojure.string/includes? name "q2-é‡è¦ä¸ç´§æ€¥") 2
			                  (clojure.string/includes? name "q3-ç´§æ€¥ä¸é‡è¦") 3
			                  :else 4))))))
			  }
			  #+END_QUERY
		- #+BEGIN_QUERY
		  {:title [:h2 "â° å·²è¿‡æœŸå¾…åŠ"]
		   :query [:find (pull ?b [*])
		           :in $ ?today
		           :where
		           [?b :block/marker ?marker]
		           [(contains? #{"TODO" "DOING" "NOW" "LATER"} ?marker)]
		           ;; æ’é™¤å·²å®Œæˆå’Œå·²å–æ¶ˆ
		           (not [?b :block/marker "DONE"])
		           (not [?b :block/marker "CANCELED"])
		           ;; æ—¶é—´é€»è¾‘ï¼šæ‰¾å‡ºæ—©äºä»Šå¤©çš„è®¡åˆ’æˆ–æˆªæ­¢æ—¥æœŸ
		           (or-join [?b ?today]
		             (and [?b :block/scheduled ?d] [(< ?d ?today)])
		             (and [?b :block/deadline ?d] [(< ?d ?today)]))
		   ]
		   :inputs [:today]
		   :breadcrumb-show? true
		   :result-transform (fn [res]
		      (sort-by (fn [b]
		          (let [content (clojure.string/lower-case (get b :block/content ""))]
		            (cond 
		              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
		              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
		              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
		              :else 4)))
		          res))
		  }
		  #+END_QUERY
		- collapsed:: true
		  #+BEGIN_QUERY
		  {:title [:h2 "ğŸ“¥ æ— è®¡åˆ’æ—¶é—´çš„å¾…åŠ "]
		   :query [:find (pull ?b [*])
		           :in $ ?today
		           :where
		           [?b :block/marker ?marker]
		           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
		           (not [?b :block/marker "DONE"])
		           ;; å…³é”®æ’é™¤é€»è¾‘
		           (not [?b :block/scheduled])
		           (not [?b :block/deadline])
		           [?b :block/page ?p]
		           (not [?p :block/journal-day ?today])]
		   :inputs [:today]
		   :result-transform (fn [res]
		      (sort-by (fn [b]
		          (let [content (clojure.string/lower-case (get b :block/content ""))]
		            (cond 
		              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
		              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
		              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
		              :else 4)))
		          res))
		  }
		  #+END_QUERY
	- # log:
		- 14:00-15:46 ææ¨¡ç‰ˆ
		-
- LATER æŠŠroutineçš„å†…å®¹ä¿®ç†ä¸€ä¸‹
- #+BEGIN_QUERY
  {:title "ğŸ•µï¸ ä»»åŠ¡åº•å±‚å±æ€§æ‰«æä»ª (ä¿®å¤ç‰ˆ)"
   :query [:find (pull ?b [* {:block/page [*]}])
           :where
           [?b :block/content ?c]
           [(clojure.string/includes? ?c "æ‰¾å®ä¹ ")]
   ]
   :view (fn [rows]
           [:div.p-4
            (for [r rows]
              (let [block (first r) ;; å…³é”®ç‚¹ï¼šå¿…é¡»å– first æ‰èƒ½æ‹¿åˆ°å†…å®¹
                    page (get block :block/page)
                    p-name (get page :block/name)
                    p-journal-day (get page :block/journal-day)]
                [:div.mb-4.p-2.border
                 [:p [:b "1. ä»»åŠ¡å†…å®¹: "] (get block :block/content)]
                 [:p [:b "2. æ‰€å±é¡µé¢å†…éƒ¨å (Internal Name): "] [:code p-name]]
                 [:p [:b "3. æ—¥è®°æ—¥æœŸæ•°å­— (Journal Day): "] [:code (str p-journal-day)]]
                 [:p [:b "4. æ•°æ®åº“ ID (DB ID): "] (get block :db/id)]
                 [:p [:b "5. æ ‡ç­¾å¼•ç”¨åˆ—è¡¨: "] (str (map :block/name (get block :block/refs)))]]))])
  }
  #+END_QUERY
-