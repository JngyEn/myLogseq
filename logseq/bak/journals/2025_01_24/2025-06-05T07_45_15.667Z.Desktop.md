- md这睡晚了，感觉脑子都转不动，不能这样啊啊啊啊啊#碎碎念
- [[Daily Log]]
	- 目标：
		- 热度排行版
			- DONE 定时更新排行榜版本（与定时更新状态一致，都是一天）
			- DONE 用户参与活动且状态改变时更新本条数据的redis和热度表
			- DONE 活动被主动取消时，更新对应redis和热度表（截止是在自动更新里设置的）
			- DONE 创建活动时同步创建当天的热门表，热度通过时间戳细化
		- 报名的并发处理
			- DONE 用户参与活动的并发方案
			  id:: 67935cac-0881-46fc-8476-a26b3bf7fbaf
			- DONE 在参加和退出活动时判断状态并且添加热度修改方法
			- DONE  写数据库原子操作，完善参加和退出接口
			  project::[[用户操作/报名的并发]]
		- 收藏的并发
		- 状态流转方案
	- 10:45-11:25 >[🍅 25min](#agenda-pomo://?t=f-1737686751760-1500)
		- 目标：热度排行榜方案
		- 总结：离线方案基本搞定
	- 11:35 - 12:00 >[🍅 26min](#agenda-pomo://?t=p-1737689770409-1%2Cp-1737689772115-1%2Cf-1737689773921-1500)
		- 目标：考虑排行榜方案的各种并发问题，可以的话就开写
		- 总结：并发在报名和状态更新阶段就解决了
	- 12:30-12:45 吃午饭
	- 14:45-15:20 更新方案写出来
		- 总结：动作加快，别看其他的，脑子里想现在是在做什么
	- 15：25-15:50 排行榜写出来
		- 总结：不能跟老妈摆龙门阵了
	- 15:55-16:20 排行榜
		- 总结：点外卖那些，到五点才把定时更新做完
	- 16:20-17:45 用户参与活动时更新本条数据的redis和热度表
		- 总结：时间是怎么消失的？不是哥们？我怎么完全没感觉到？
	- 17:55-18:20 用户参与活动时更新本条数据的redis和热度表 >[🍅 25min](#agenda-pomo://?t=f-1737712508034-1500)
		- 总结：更新方案出来了，接下来看参加、退出活动的防并发，之后再补上热度更新即可（也要防并发）
	- 18:35-19:00 用户参与活动的并发方案
		- 总结：三种方案，但是还是不太能说为什么不用redis，运维成本在这里是怎么考虑的，主要就是业务的并发量不大
	- 20:25-20:50  完善参加和退出接口
	  id:: 67938051-4068-496b-b004-19b6698c2274
		- 总结：参加活动接口完成
	- 9:16-9:40 完善退出接口
- [🧹Cleared] Take note on [[热度排行/排行表方案]], Clear at [[Jan 24th, 2025]],18:34
	- ((c731394c-8a65-430e-a68e-5632d7e09dd0))
-
- [💋Uncleared] [[活动状态/状态流转更新]]
	- ## 问题：
		- 各个状态怎么转换的
		  logseq.order-list-type:: number
		- 转换的时候并发了怎么办
		  logseq.order-list-type:: number
		- 一个线程同时更新了两次怎么办
		  logseq.order-list-type:: number
- 百万级别的排行榜也是用redis做的啊？[[热度排行/排行表方案]]
	- 但是要分片来解决大 key 问题
	- 异步更新来解决并发问题
	- 频繁访问的可以用本地缓存来进一步降低redis的压力，但是会带来不一致的问题
	- 如果只需要给前N个排序，那么可以用hash来储存全量数据，
- [[最终一致性]]就是可以接受短时间内的不一致，但是在无后续更新的情况下，系统最终会达到一致。具体保障措施一般是版本号等方式来实现分布式系统中的同步，延迟是由于mq等工具
	- 一般采用对账机制来保障
-
-
-
- 救命我家里午饭之后的气氛太安眠了，我爸妈在睡觉，我家狗也在客厅睡觉还在打呼噜。外面有一点小雨，一只鸟刚刚飞到池塘边上喝水,我也穿着睡袍在沙发，唯一格格不入的就是我在打代码.我应该在看书或者看电影才对味😢#碎碎念
-
- [🧹Cleared] Take note on [[用户操作/报名的并发]], Clear at [[Jan 26th, 2025]],09:40
	- ((c731394c-8a65-430e-a68e-5632d7e09dd0))