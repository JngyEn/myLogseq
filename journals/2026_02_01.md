- LATER numbers è´¦å•åˆ†å‡ºæ¯ä¸ªæœˆçš„
- [[Daily Log]]
	- ç›´æ¥å®‰æ’ï¼ˆæŠ˜å å†…å®¹ï¼Œåœ¨ä¸‹æ–¹æŸ¥çœ‹ï¼‰
	- ä»»åŠ¡ï¼ˆä¸€å¤©ç»“æŸååˆ é™¤ï¼Œæ–¹ä¾¿å¤§é‡queryæ‹–å®æ€§èƒ½ï¼‰
		- #+BEGIN_QUERY
		  {
		   :title ["âœ… Q0-Routine "]
		   :query [:find (pull ?b [* {:block/page [:block/original-name]}])
		           :where
		           [?tag :block/name "q0-routine"]
		           [?b :block/refs ?tag]
		           (not [?b :block/is-template? true])]
		   :view (fn [rows]
		           [:table
		            [:thead
		             [:tr
		              [:th "ä»»åŠ¡åç§°"]
		              [:th "å¼€å§‹"]
		              [:th "ç»“æŸ"]
		              [:th "æ¥æºé¡µé¢"]]]
		            [:tbody
		             (for [r rows
		                   :let [content (get r :block/content "")
		                         ;; --- 1. å®‰å…¨çš„æ ‡é¢˜æ¸…ç† (ä¿æŒä¸å˜) ---
		                         lines (clojure.string/split-lines content)
		                         first-line (first lines)
		                         clean-name (clojure.string/replace first-line "#[[Q0-Routine]]" "")
		                         
		                         ;; --- 2. å±æ€§è¯»å– (ä¿æŒä¸å˜) ---
		                         props (get r :block/properties {})
		                         start (get props :start-date)
		                         due (get props :deadline)
		                         
		                         ;; --- 3. é¡µé¢é“¾æ¥ä¸é€»è¾‘åˆ¤æ–­ (æ–°åŠ åŠŸèƒ½) ---
		                         page-name (get-in r [:block/page :block/original-name])
		                         ;; åˆ¤æ–­1ï¼šå†…å®¹é‡Œæœ‰æ²¡æœ‰åŒæ‹¬å· [[
		                         has-brackets (clojure.string/includes? content "[[")
		                         ;; åˆ¤æ–­2ï¼šé¡µé¢åæ˜¯ä¸æ˜¯ journey (è½¬å°å†™å¯¹æ¯”)
		                         ;; æ³¨æ„ï¼šå¦‚æœä½ çš„æ—¥è®°é¡µå« "journals" è€Œä¸æ˜¯ "journey"ï¼Œè¯·æ‰‹åŠ¨æ”¹ä¸€ä¸‹ä¸‹é¢å¼•å·é‡Œçš„è¯
		                         is-journey (= (clojure.string/lower-case (str page-name)) "journey")
		                         
		                         ;; æœ€ç»ˆå†³å®šï¼š(ä¸æ˜¯journey) æˆ–è€… (æœ‰åŒæ‹¬å·) æ‰æ˜¾ç¤º
		                         show-page (or (not is-journey) has-brackets)]]
		               [:tr
		                [:td [:b clean-name]]
		                [:td (if start start "-")]
		                [:td (if due due "-")]
		                ;; --- è¿™é‡Œå˜æˆäº†å¯ç‚¹å‡»çš„é“¾æ¥ ---
		                [:td (if (and show-page page-name)
		                       [:a {:class "page-ref" 
		                            :href (str "#/page/" page-name)} 
		                           page-name]
		                       "-")]])]])
		  }
		  #+END_QUERY
		- ğŸ’‹ ä»Šæ—¥äº‹ä»Šæ—¥æ¯•
			- #+BEGIN_QUERY
			  {:title ["ğŸ”´ Q1: é‡è¦ & ç´§æ€¥"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           ;; 1. å®šä½ä»Šå¤©çš„æ—¥è®°é¡µé¢
			           [?p :block/journal-day ?today]
			           ;; 2. é™åˆ¶å—å¿…é¡»åœ¨è¯¥é¡µé¢å†…
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           ;; 3. æ ‡ç­¾åŒ¹é…
			           [?t :block/name "q1-é‡è¦ç´§æ€¥"]
			           [?b :block/refs ?t]
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title ["ğŸŸ¡ Q2: é‡è¦ & ä¸ç´§æ€¥"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?p :block/journal-day ?today]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           [?t :block/name "q2-é‡è¦ä¸ç´§æ€¥"]
			           [?b :block/refs ?t]
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title ["ğŸ”µ Q3: ç´§æ€¥ & ä¸é‡è¦"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?p :block/journal-day ?today]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           [?t :block/name "q3-ç´§æ€¥ä¸é‡è¦"]
			           [?b :block/refs ?t]
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title ["âšª Q4: ä¸é‡è¦ & ä¸ç´§æ€¥ / å…¶ä»–"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?p :block/journal-day ?today]
			           [?b :block/page ?p]
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
			           
			           ;; --- æ ¸å¿ƒä¿®æ”¹éƒ¨åˆ†ï¼šæ’é™¤åµŒå¥—ä»»åŠ¡ ---
			           ;; å¦‚æœä¸€ä¸ªå—çš„çˆ¶çº§(?parent)ä¹Ÿæ‹¥æœ‰ä»»åŠ¡æ ‡è®°(?p-marker)ï¼Œåˆ™æ’é™¤è¯¥å—
			           (not 
			             [?b :block/parent ?parent]
			             [?parent :block/marker ?p-marker]
			             [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?p-marker)])
			           ;; --------------------------------
			           
			           ;; æ’é™¤æ‰æ‰‹åŠ¨æ‰“äº† Q1, Q2, Q3 æ ‡ç­¾çš„ä»»åŠ¡
			           (not [?b :block/refs [:block/name "q1-é‡è¦ç´§æ€¥"]])
			           (not [?b :block/refs [:block/name "q2-é‡è¦ä¸ç´§æ€¥"]])
			           (not [?b :block/refs [:block/name "q3-ç´§æ€¥ä¸é‡è¦"]])
			   ]
			   :inputs [:today]
			   :breadcrumb-show? false
			  }
			  #+END_QUERY
		- ğŸ“ å®‰æ’åˆ°ä»Šæ—¥
			- #+BEGIN_QUERY
			  {:title ["ğŸ“… ä»Šæ—¥è®¡åˆ’å¾…åŠ"]
			   :query [:find (pull ?b [*])
			           :in $ ?today
			           :where
			           [?b :block/marker ?marker]
			           [(contains? #{"TODO" "DOING" "NOW" "LATER"} ?marker)]
			           ;; æ’é™¤å·²å®Œæˆ
			           (not [?b :block/marker "DONE"])
			           ;; æ—¶é—´åˆ¤å®šé€»è¾‘ï¼šä½¿ç”¨ or-join è§„é¿æŠ¥é”™
			           (or-join [?b ?today]
			             [?b :block/scheduled ?today]
			             [?b :block/deadline ?today]
			             (and [?j :block/journal-day ?today]
			                  [?b :block/refs ?j]))]
			   :inputs [:today]
			   :breadcrumb-show? true
			   :result-transform (fn [res]
			      (sort-by (fn [b]
			          (let [content (clojure.string/lower-case (get b :block/content ""))]
			            (cond 
			              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
			              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
			              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
			              :else 4)))
			          res))
			  }
			  #+END_QUERY
			- #+BEGIN_QUERY
			  {:title ["ğŸš€ ä»Šæ—¥å¼€å§‹çš„é¡¹ç›®"]
			   :query [:find (pull ?p [*])
			           :in $ ?today
			           :where
			           ;; 1. å¯»æ‰¾å¸¦æœ‰ type:: project å±æ€§çš„å—
			           [?b :block/properties ?props]
			           [(get ?props :type) ?type]
			           [(= ?type "project")]
			           
			           ;; 2. åŒ¹é…å…¶å¼•ç”¨çš„æ—¥æœŸæ˜¯ä»Šå¤©
			           [?jp :block/journal-day ?today]
			           [?b :block/refs ?jp]
			           
			           ;; 3. å…³è”åˆ°æ‰€å±é¡µé¢
			           [?b :block/page ?p]]
			   :inputs [:today]
			   :result-transform (fn [res]
			      (->> res
			           ;; å…ˆå»é‡ï¼Œé¿å…åŒä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ªå—ç¬¦åˆæ¡ä»¶å¯¼è‡´é‡å¤å±•ç¤º
			           distinct
			           (sort-by (fn [p]
			              (let [p-name (or (get p :block/original-name) (get p :block/name) "z")
			                    name (clojure.string/lower-case (str p-name))]
			                (cond 
			                  (clojure.string/includes? name "q1-é‡è¦ç´§æ€¥") 1
			                  (clojure.string/includes? name "q2-é‡è¦ä¸ç´§æ€¥") 2
			                  (clojure.string/includes? name "q3-ç´§æ€¥ä¸é‡è¦") 3
			                  :else 4))))))
			  }
			  #+END_QUERY
		- #+BEGIN_QUERY
		  {:title ["â° å·²è¿‡æœŸå¾…åŠ "]
		   :query [:find (pull ?b [*])
		           :in $ ?today
		           :where
		           [?b :block/marker ?marker]
		           [(contains? #{"TODO" "DOING" "NOW" "LATER"} ?marker)]
		           ;; æ’é™¤å·²å®Œæˆå’Œå·²å–æ¶ˆ
		           (not [?b :block/marker "DONE"])
		           (not [?b :block/marker "CANCELED"])
		           ;; æ—¶é—´é€»è¾‘ï¼šæ‰¾å‡ºæ—©äºä»Šå¤©çš„è®¡åˆ’æˆ–æˆªæ­¢æ—¥æœŸ
		           (or-join [?b ?today]
		             (and [?b :block/scheduled ?d] [(< ?d ?today)])
		             (and [?b :block/deadline ?d] [(< ?d ?today)]))
		   ]
		   :inputs [:today]
		   :breadcrumb-show? true
		   :result-transform (fn [res]
		      (sort-by (fn [b]
		          (let [content (clojure.string/lower-case (get b :block/content ""))]
		            (cond 
		              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
		              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
		              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
		              :else 4)))
		          res))
		  }
		  #+END_QUERY
		- #+BEGIN_QUERY
		  {:title ["ğŸ“¥ æ— è®¡åˆ’æ—¶é—´çš„å¾…åŠ "]
		   :query [:find (pull ?b [*])
		           :in $ ?today
		           :where
		           [?b :block/marker ?marker]
		           [(contains? #{"TODO" "LATER" "NOW" "DOING"} ?marker)]
		           (not [?b :block/marker "DONE"])
		           ;; å…³é”®æ’é™¤é€»è¾‘
		           (not [?b :block/scheduled])
		           (not [?b :block/deadline])
		           [?b :block/page ?p]
		           (not [?p :block/journal-day ?today])]
		   :inputs [:today]
		   :result-transform (fn [res]
		      (sort-by (fn [b]
		          (let [content (clojure.string/lower-case (get b :block/content ""))]
		            (cond 
		              (clojure.string/includes? content "q1-é‡è¦ç´§æ€¥") 1
		              (clojure.string/includes? content "q2-é‡è¦ä¸ç´§æ€¥") 2
		              (clojure.string/includes? content "q3-ç´§æ€¥ä¸é‡è¦") 3
		              :else 4)))
		          res))
		  }
		  #+END_QUERY
	- # log: